// 中学受験対応 完全カリキュラムマップ
// 各教科50-80単元の詳細構成、難易度グラデーション、前提知識チェーン

import { Subject, Topic } from '../types';

// 難易度レベル定義
export type DifficultyLevel = 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10;
export type Grade = '4th' | '5th' | '6th';

// 拡張されたトピック型
export interface ExtendedTopic extends Omit<Topic, 'examFrequency' | 'gradeLevel'> {
  difficulty: DifficultyLevel;
  grade: Grade[];
  gradeLevel: Grade[];
  prerequisites: string[]; // 前提となるトピックID
  estimatedHours: number;
  importance: 'essential' | 'important' | 'useful';
  examFrequency: 'very_high' | 'high' | 'medium' | 'low';
  keywords: string[];
  relatedConcepts: string[];
  schoolTypes: ('basic' | 'standard' | 'advanced' | 'top')[];
}

// 拡張された教科型
export interface ExtendedSubject extends Subject {
  topics: ExtendedTopic[];
  totalHours: number;
  gradeDistribution: {
    '4th': number;
    '5th': number; 
    '6th': number;
  };
}

// 算数 - 72単元
export const MATH_CURRICULUM: ExtendedTopic[] = [
  // === 数と計算 (18単元) ===
  {
    id: 'math_basic_four_operations',
    name: '四則演算の基礎',
    description: '基本的な四則演算の習得',
    subUnits: [],
    gradeLevel: ['4th'],
    learningObjectives: ['四則演算を正確に計算できる'],
    difficulty: 1,
    grade: ['4th'],
    prerequisites: [],
    estimatedHours: 3,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['加法', '減法', '乗法', '除法', '筆算'],
    relatedConcepts: ['計算の順序', '暗算'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_large_numbers',
    name: '大きな数（億・兆）',
    difficulty: 2,
    grade: ['4th'],
    prerequisites: ['math_basic_four_operations'],
    estimatedHours: 2,
    importance: 'essential',
    examFrequency: 'high',
    keywords: ['億', '兆', '位取り', '数の読み方'],
    relatedConcepts: ['概数', '四捨五入'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_decimals_basic',
    name: '小数の基礎',
    difficulty: 2,
    grade: ['4th', '5th'],
    prerequisites: ['math_basic_four_operations'],
    estimatedHours: 4,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['小数点', '小数第一位', '小数の大小'],
    relatedConcepts: ['分数', '割合'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_decimals_calculation',
    name: '小数の計算',
    difficulty: 3,
    grade: ['5th'],
    prerequisites: ['math_decimals_basic'],
    estimatedHours: 5,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['小数の足し算', '小数の引き算', '小数の掛け算', '小数の割り算'],
    relatedConcepts: ['筆算', '概数'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_fractions_basic',
    name: '分数の基礎',
    difficulty: 3,
    grade: ['4th', '5th'],
    prerequisites: ['math_basic_four_operations'],
    estimatedHours: 4,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['分子', '分母', '真分数', '仮分数', '帯分数'],
    relatedConcepts: ['約分', '通分'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_fractions_calculation',
    name: '分数の計算',
    difficulty: 4,
    grade: ['5th', '6th'],
    prerequisites: ['math_fractions_basic'],
    estimatedHours: 6,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['分数の足し算', '分数の引き算', '分数の掛け算', '分数の割り算'],
    relatedConcepts: ['約分', '通分', '最小公倍数'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_mixed_calculations',
    name: '小数・分数の混合計算',
    difficulty: 5,
    grade: ['6th'],
    prerequisites: ['math_decimals_calculation', 'math_fractions_calculation'],
    estimatedHours: 4,
    importance: 'important',
    examFrequency: 'high',
    keywords: ['混合計算', '計算の工夫', '計算順序'],
    relatedConcepts: ['分配法則', '結合法則'],
    schoolTypes: ['standard', 'advanced', 'top']
  },
  {
    id: 'math_negative_numbers',
    name: '負の数',
    difficulty: 6,
    grade: ['6th'],
    prerequisites: ['math_fractions_calculation'],
    estimatedHours: 3,
    importance: 'useful',
    examFrequency: 'medium',
    keywords: ['負の数', 'マイナス', '数直線', '絶対値'],
    relatedConcepts: ['正の数', '数の大小'],
    schoolTypes: ['advanced', 'top']
  },
  {
    id: 'math_prime_numbers',
    name: '素数と合成数',
    difficulty: 4,
    grade: ['5th', '6th'],
    prerequisites: ['math_basic_four_operations'],
    estimatedHours: 3,
    importance: 'important',
    examFrequency: 'high',
    keywords: ['素数', '合成数', '素因数分解', '約数'],
    relatedConcepts: ['最大公約数', '最小公倍数'],
    schoolTypes: ['standard', 'advanced', 'top']
  },
  {
    id: 'math_divisibility',
    name: '約数と倍数',
    difficulty: 4,
    grade: ['5th', '6th'],
    prerequisites: ['math_prime_numbers'],
    estimatedHours: 4,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['約数', '倍数', '公約数', '公倍数', '最大公約数', '最小公倍数'],
    relatedConcepts: ['素因数分解', '分数の約分'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_percentage_basic',
    name: '百分率の基礎',
    difficulty: 4,
    grade: ['5th'],
    prerequisites: ['math_decimals_calculation'],
    estimatedHours: 3,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['百分率', 'パーセント', '%', '歩合'],
    relatedConcepts: ['小数', '分数', '割合'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_ratios',
    name: '割合と比',
    difficulty: 5,
    grade: ['6th'],
    prerequisites: ['math_percentage_basic', 'math_fractions_calculation'],
    estimatedHours: 5,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['割合', '比', '比の値', '連比', '逆比'],
    relatedConcepts: ['百分率', '相似', '縮図'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_proportional_reasoning',
    name: '比例・反比例',
    difficulty: 6,
    grade: ['6th'],
    prerequisites: ['math_ratios'],
    estimatedHours: 4,
    importance: 'important',
    examFrequency: 'high',
    keywords: ['比例', '反比例', '比例定数', 'グラフ'],
    relatedConcepts: ['関数', '座標'],
    schoolTypes: ['standard', 'advanced', 'top']
  },
  {
    id: 'math_complex_calculations',
    name: '複雑な計算問題',
    difficulty: 7,
    grade: ['6th'],
    prerequisites: ['math_mixed_calculations', 'math_ratios'],
    estimatedHours: 4,
    importance: 'important',
    examFrequency: 'high',
    keywords: ['工夫した計算', '逆算', '文字式'],
    relatedConcepts: ['式の変形', '等式'],
    schoolTypes: ['advanced', 'top']
  },
  {
    id: 'math_number_patterns',
    name: '数列と規則性',
    difficulty: 6,
    grade: ['6th'],
    prerequisites: ['math_basic_four_operations'],
    estimatedHours: 4,
    importance: 'important',
    examFrequency: 'high',
    keywords: ['数列', '等差数列', '等比数列', '規則性'],
    relatedConcepts: ['パターン認識', '帰納的思考'],
    schoolTypes: ['standard', 'advanced', 'top']
  },
  {
    id: 'math_bases_number_systems',
    name: '記数法',
    difficulty: 7,
    grade: ['6th'],
    prerequisites: ['math_large_numbers'],
    estimatedHours: 3,
    importance: 'useful',
    examFrequency: 'medium',
    keywords: ['二進法', '三進法', '五進法', 'n進法'],
    relatedConcepts: ['位取り', 'コンピュータ'],
    schoolTypes: ['advanced', 'top']
  },
  {
    id: 'math_modular_arithmetic',
    name: '余りの活用',
    difficulty: 8,
    grade: ['6th'],
    prerequisites: ['math_divisibility'],
    estimatedHours: 3,
    importance: 'useful',
    examFrequency: 'medium',
    keywords: ['余り', '合同式', '周期性'],
    relatedConcepts: ['カレンダー', '循環'],
    schoolTypes: ['advanced', 'top']
  },
  {
    id: 'math_advanced_number_theory',
    name: '高度な数の性質',
    difficulty: 9,
    grade: ['6th'],
    prerequisites: ['math_prime_numbers', 'math_modular_arithmetic'],
    estimatedHours: 4,
    importance: 'useful',
    examFrequency: 'low',
    keywords: ['ユークリッドの互除法', '完全数', '友愛数'],
    relatedConcepts: ['整数論', '数学的美しさ'],
    schoolTypes: ['top']
  },

  // === 図形 (20単元) ===
  {
    id: 'math_basic_shapes',
    name: '基本図形',
    difficulty: 1,
    grade: ['4th'],
    prerequisites: [],
    estimatedHours: 3,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['点', '直線', '線分', '角', '三角形', '四角形'],
    relatedConcepts: ['頂点', '辺', '面'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_angles',
    name: '角の性質',
    difficulty: 3,
    grade: ['4th', '5th'],
    prerequisites: ['math_basic_shapes'],
    estimatedHours: 4,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['直角', '鋭角', '鈍角', '平角', '周角'],
    relatedConcepts: ['角度の測定', '分度器'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_triangle_properties',
    name: '三角形の性質',
    difficulty: 4,
    grade: ['5th'],
    prerequisites: ['math_angles'],
    estimatedHours: 4,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['正三角形', '二等辺三角形', '直角三角形', '内角の和'],
    relatedConcepts: ['合同', '相似'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_quadrilateral_properties',
    name: '四角形の性質',
    difficulty: 4,
    grade: ['5th'],
    prerequisites: ['math_triangle_properties'],
    estimatedHours: 4,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['正方形', '長方形', '平行四辺形', '台形', 'ひし形'],
    relatedConcepts: ['対角線', '対辺', '対角'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_circle_properties',
    name: '円の性質',
    difficulty: 4,
    grade: ['5th'],
    prerequisites: ['math_basic_shapes'],
    estimatedHours: 3,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['円周', '半径', '直径', '弧', '弦', '中心角'],
    relatedConcepts: ['円周率', '扇形'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_area_perimeter',
    name: '面積と周の長さ',
    difficulty: 5,
    grade: ['5th', '6th'],
    prerequisites: ['math_triangle_properties', 'math_quadrilateral_properties'],
    estimatedHours: 5,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['面積', '周の長さ', '公式', '単位変換'],
    relatedConcepts: ['平方センチメートル', 'アール', 'ヘクタール'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_circle_area_circumference',
    name: '円の面積と円周',
    difficulty: 5,
    grade: ['6th'],
    prerequisites: ['math_circle_properties', 'math_area_perimeter'],
    estimatedHours: 4,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['円周率', '円の面積', '円周の長さ', '扇形'],
    relatedConcepts: ['π（パイ）', '弧の長さ', '扇形の面積'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_solid_figures',
    name: '立体図形の基礎',
    difficulty: 5,
    grade: ['5th', '6th'],
    prerequisites: ['math_basic_shapes'],
    estimatedHours: 4,
    importance: 'essential',
    examFrequency: 'high',
    keywords: ['立方体', '直方体', '円柱', '円錐', '角柱', '角錐'],
    relatedConcepts: ['展開図', '見取図'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_volume_surface_area',
    name: '体積と表面積',
    difficulty: 6,
    grade: ['6th'],
    prerequisites: ['math_solid_figures', 'math_area_perimeter'],
    estimatedHours: 5,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['体積', '表面積', '容積', '立方センチメートル'],
    relatedConcepts: ['リットル', 'ミリリットル'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_similarity',
    name: '相似',
    difficulty: 7,
    grade: ['6th'],
    prerequisites: ['math_ratios', 'math_triangle_properties'],
    estimatedHours: 4,
    importance: 'important',
    examFrequency: 'high',
    keywords: ['相似', '相似比', '拡大', '縮小'],
    relatedConcepts: ['比例', '縮図', '地図'],
    schoolTypes: ['standard', 'advanced', 'top']
  },
  {
    id: 'math_congruence',
    name: '合同',
    difficulty: 6,
    grade: ['6th'],
    prerequisites: ['math_triangle_properties'],
    estimatedHours: 3,
    importance: 'important',
    examFrequency: 'medium',
    keywords: ['合同', '対応する辺', '対応する角'],
    relatedConcepts: ['重なり合う', '同じ形'],
    schoolTypes: ['standard', 'advanced', 'top']
  },
  {
    id: 'math_coordinate_geometry',
    name: '座標',
    difficulty: 6,
    grade: ['6th'],
    prerequisites: ['math_basic_shapes'],
    estimatedHours: 3,
    importance: 'important',
    examFrequency: 'medium',
    keywords: ['座標', 'x軸', 'y軸', '原点', '象限'],
    relatedConcepts: ['グラフ', '点の位置'],
    schoolTypes: ['standard', 'advanced', 'top']
  },
  {
    id: 'math_transformations',
    name: '図形の移動',
    difficulty: 7,
    grade: ['6th'],
    prerequisites: ['math_coordinate_geometry'],
    estimatedHours: 3,
    importance: 'useful',
    examFrequency: 'medium',
    keywords: ['平行移動', '回転', '対称移動', '反射'],
    relatedConcepts: ['対称の軸', '回転の中心'],
    schoolTypes: ['advanced', 'top']
  },
  {
    id: 'math_complex_area_problems',
    name: '複合図形の面積',
    difficulty: 8,
    grade: ['6th'],
    prerequisites: ['math_area_perimeter', 'math_circle_area_circumference'],
    estimatedHours: 4,
    importance: 'important',
    examFrequency: 'high',
    keywords: ['複合図形', '分割', '移動', '重複'],
    relatedConcepts: ['等積変形', '図形の工夫'],
    schoolTypes: ['advanced', 'top']
  },
  {
    id: 'math_solid_cutting',
    name: '立体の切断',
    difficulty: 9,
    grade: ['6th'],
    prerequisites: ['math_solid_figures'],
    estimatedHours: 4,
    importance: 'useful',
    examFrequency: 'medium',
    keywords: ['切断面', '断面図', '立体の分割'],
    relatedConcepts: ['空間認識', '想像力'],
    schoolTypes: ['advanced', 'top']
  },
  {
    id: 'math_projection_views',
    name: '投影図',
    difficulty: 8,
    grade: ['6th'],
    prerequisites: ['math_solid_figures'],
    estimatedHours: 3,
    importance: 'useful',
    examFrequency: 'medium',
    keywords: ['正面図', '側面図', '平面図', '投影'],
    relatedConcepts: ['見る方向', '技術図面'],
    schoolTypes: ['advanced', 'top']
  },
  {
    id: 'math_tessellation',
    name: '図形の敷き詰め',
    difficulty: 7,
    grade: ['6th'],
    prerequisites: ['math_quadrilateral_properties'],
    estimatedHours: 2,
    importance: 'useful',
    examFrequency: 'low',
    keywords: ['敷き詰め', 'タイリング', '平面分割'],
    relatedConcepts: ['模様', 'パターン'],
    schoolTypes: ['advanced', 'top']
  },
  {
    id: 'math_geometric_construction',
    name: '作図',
    difficulty: 6,
    grade: ['6th'],
    prerequisites: ['math_angles', 'math_triangle_properties'],
    estimatedHours: 3,
    importance: 'useful',
    examFrequency: 'medium',
    keywords: ['コンパス', '定規', '垂直二等分線', '角の二等分線'],
    relatedConcepts: ['作図の手順', '幾何学的性質'],
    schoolTypes: ['standard', 'advanced', 'top']
  },
  {
    id: 'math_advanced_geometry',
    name: '高度な図形問題',
    difficulty: 10,
    grade: ['6th'],
    prerequisites: ['math_similarity', 'math_complex_area_problems'],
    estimatedHours: 5,
    importance: 'useful',
    examFrequency: 'medium',
    keywords: ['補助線', '発想', '証明', '幾何的思考'],
    relatedConcepts: ['論理的推論', '空間認識'],
    schoolTypes: ['top']
  },
  {
    id: 'math_geometric_probability',
    name: '幾何確率',
    difficulty: 9,
    grade: ['6th'],
    prerequisites: ['math_area_perimeter', 'math_probability'],
    estimatedHours: 2,
    importance: 'useful',
    examFrequency: 'low',
    keywords: ['幾何確率', '面積比', '確率計算'],
    relatedConcepts: ['確率', '測度'],
    schoolTypes: ['top']
  },

  // === 測定・変化と関係 (12単元) ===
  {
    id: 'math_units_basic',
    name: '単位の基礎',
    difficulty: 2,
    grade: ['4th'],
    prerequisites: [],
    estimatedHours: 3,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['長さ', '重さ', 'かさ', 'メートル', 'グラム', 'リットル'],
    relatedConcepts: ['単位変換', '生活との関連'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_unit_conversion',
    name: '単位の変換',
    difficulty: 4,
    grade: ['5th'],
    prerequisites: ['math_units_basic', 'math_decimals_calculation'],
    estimatedHours: 4,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['単位変換', 'キロ', 'ミリ', '倍数関係'],
    relatedConcepts: ['十進法', '生活単位'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_time_calculation',
    name: '時刻と時間',
    difficulty: 3,
    grade: ['4th', '5th'],
    prerequisites: ['math_basic_four_operations'],
    estimatedHours: 3,
    importance: 'essential',
    examFrequency: 'high',
    keywords: ['時刻', '時間', '午前', '午後', '24時間制'],
    relatedConcepts: ['時間の計算', 'タイムテーブル'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_speed',
    name: '速さ',
    difficulty: 6,
    grade: ['6th'],
    prerequisites: ['math_unit_conversion', 'math_time_calculation'],
    estimatedHours: 5,
    importance: 'essential',
    examFrequency: 'very_high',
    keywords: ['速さ', '道のり', '時間', '時速', '分速', '秒速'],
    relatedConcepts: ['比例', '旅人算'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_traveling_problems',
    name: '旅人算',
    difficulty: 8,
    grade: ['6th'],
    prerequisites: ['math_speed', 'math_ratios'],
    estimatedHours: 4,
    importance: 'important',
    examFrequency: 'high',
    keywords: ['出会い', '追いかけ', '往復', '時差'],
    relatedConcepts: ['相対速度', 'ダイヤグラム'],
    schoolTypes: ['standard', 'advanced', 'top']
  },
  {
    id: 'math_train_problems',
    name: '通過算',
    difficulty: 7,
    grade: ['6th'],
    prerequisites: ['math_speed'],
    estimatedHours: 3,
    importance: 'important',
    examFrequency: 'medium',
    keywords: ['列車', 'トンネル', '電柱', '通過時間'],
    relatedConcepts: ['列車の長さ', '相対速度'],
    schoolTypes: ['standard', 'advanced', 'top']
  },
  {
    id: 'math_work_problems',
    name: '仕事算',
    difficulty: 7,
    grade: ['6th'],
    prerequisites: ['math_ratios', 'math_fractions_calculation'],
    estimatedHours: 3,
    importance: 'important',
    examFrequency: 'medium',
    keywords: ['仕事量', '能率', '共同作業', '完成'],
    relatedConcepts: ['比例', '逆比例'],
    schoolTypes: ['standard', 'advanced', 'top']
  },
  {
    id: 'math_water_tank_problems',
    name: '水そう算',
    difficulty: 8,
    grade: ['6th'],
    prerequisites: ['math_work_problems', 'math_volume_surface_area'],
    estimatedHours: 3,
    importance: 'useful',
    examFrequency: 'medium',
    keywords: ['給水', '排水', '水位', '満水'],
    relatedConcepts: ['流量', '時間変化'],
    schoolTypes: ['advanced', 'top']
  },
  {
    id: 'math_concentration_problems',
    name: '濃度算',
    difficulty: 8,
    grade: ['6th'],
    prerequisites: ['math_percentage_basic', 'math_ratios'],
    estimatedHours: 3,
    importance: 'useful',
    examFrequency: 'medium',
    keywords: ['濃度', '食塩水', '混合', '希釈'],
    relatedConcepts: ['百分率', '重量比'],
    schoolTypes: ['advanced', 'top']
  },
  {
    id: 'math_age_problems',
    name: '年齢算',
    difficulty: 6,
    grade: ['6th'],
    prerequisites: ['math_basic_four_operations'],
    estimatedHours: 2,
    importance: 'useful',
    examFrequency: 'medium',
    keywords: ['年齢', '年後', '年前', '比'],
    relatedConcepts: ['時間の経過', '方程式的思考'],
    schoolTypes: ['standard', 'advanced', 'top']
  },
  {
    id: 'math_calendar_problems',
    name: 'カレンダー算',
    difficulty: 5,
    grade: ['6th'],
    prerequisites: ['math_modular_arithmetic'],
    estimatedHours: 2,
    importance: 'useful',
    examFrequency: 'low',
    keywords: ['曜日', '閏年', '日数計算'],
    relatedConcepts: ['周期性', '余り'],
    schoolTypes: ['standard', 'advanced', 'top']
  },
  {
    id: 'math_complex_application_problems',
    name: '複合応用問題',
    difficulty: 9,
    grade: ['6th'],
    prerequisites: ['math_traveling_problems', 'math_work_problems', 'math_concentration_problems'],
    estimatedHours: 4,
    importance: 'useful',
    examFrequency: 'medium',
    keywords: ['複合問題', '連立', '段階的解法'],
    relatedConcepts: ['問題分析', '論理的思考'],
    schoolTypes: ['top']
  },

  // === データの活用・確率 (10単元) ===
  {
    id: 'math_data_collection',
    name: 'データの整理',
    difficulty: 3,
    grade: ['4th', '5th'],
    prerequisites: [],
    estimatedHours: 3,
    importance: 'important',
    examFrequency: 'medium',
    keywords: ['データ', '表', 'グラフ', '整理'],
    relatedConcepts: ['調査', '統計'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_bar_graphs',
    name: '棒グラフ',
    difficulty: 3,
    grade: ['4th'],
    prerequisites: ['math_data_collection'],
    estimatedHours: 2,
    importance: 'important',
    examFrequency: 'medium',
    keywords: ['棒グラフ', '横軸', '縦軸', '目盛り'],
    relatedConcepts: ['比較', 'データの可視化'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_line_graphs',
    name: '折れ線グラフ',
    difficulty: 4,
    grade: ['4th', '5th'],
    prerequisites: ['math_bar_graphs'],
    estimatedHours: 2,
    importance: 'important',
    examFrequency: 'medium',
    keywords: ['折れ線グラフ', '変化', '傾向'],
    relatedConcepts: ['時系列', '増減'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_pie_charts',
    name: '円グラフ',
    difficulty: 5,
    grade: ['5th'],
    prerequisites: ['math_percentage_basic', 'math_circle_properties'],
    estimatedHours: 3,
    importance: 'important',
    examFrequency: 'medium',
    keywords: ['円グラフ', '扇形', '割合', '中心角'],
    relatedConcepts: ['百分率', '部分と全体'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_histograms',
    name: 'ヒストグラム',
    difficulty: 6,
    grade: ['6th'],
    prerequisites: ['math_bar_graphs'],
    estimatedHours: 2,
    importance: 'useful',
    examFrequency: 'low',
    keywords: ['ヒストグラム', '度数', '階級'],
    relatedConcepts: ['度数分布', '統計'],
    schoolTypes: ['advanced', 'top']
  },
  {
    id: 'math_averages',
    name: '平均',
    difficulty: 5,
    grade: ['5th'],
    prerequisites: ['math_decimals_calculation'],
    estimatedHours: 3,
    importance: 'essential',
    examFrequency: 'high',
    keywords: ['平均', '合計', '個数'],
    relatedConcepts: ['代表値', '中央値'],
    schoolTypes: ['basic', 'standard', 'advanced', 'top']
  },
  {
    id: 'math_probability_basic',
    name: '確率の基礎',
    difficulty: 6,
    grade: ['6th'],
    prerequisites: ['math_fractions_calculation'],
    estimatedHours: 3,
    importance: 'useful',
    examFrequency: 'medium',
    keywords: ['確率', '場合の数', '起こりやすさ'],
    relatedConcepts: ['比', '分数'],
    schoolTypes: ['standard', 'advanced', 'top']
  },
  {
    id: 'math_combinatorics',
    name: '場合の数',
    difficulty: 7,
    grade: ['6th'],
    prerequisites: ['math_probability_basic'],
    estimatedHours: 4,
    importance: 'useful',
    examFrequency: 'medium',
    keywords: ['場合の数', '樹形図', '順列', '組み合わせ'],
    relatedConcepts: ['数え上げ', '系統的思考'],
    schoolTypes: ['advanced', 'top']
  },
  {
    id: 'math_probability_calculations',
    name: '確率の計算',
    difficulty: 8,
    grade: ['6th'],
    prerequisites: ['math_combinatorics'],
    estimatedHours: 3,
    importance: 'useful',
    examFrequency: 'medium',
    keywords: ['確率計算', '独立', '排反'],
    relatedConcepts: ['条件付き確率', '期待値'],
    schoolTypes: ['advanced', 'top']
  },
  {
    id: 'math_statistics_analysis',
    name: '統計的分析',
    difficulty: 9,
    grade: ['6th'],
    prerequisites: ['math_averages', 'math_histograms'],
    estimatedHours: 3,
    importance: 'useful',
    examFrequency: 'low',
    keywords: ['統計', '分散', '標準偏差', '相関'],
    relatedConcepts: ['データマイニング', '統計的推論'],
    schoolTypes: ['top']
  },

  // === 思考力・発展問題 (12単元) ===
  {
    id: 'math_logical_reasoning',
    name: '論理的思考',
    difficulty: 6,
    grade: ['5th', '6th'],
    prerequisites: [],
    estimatedHours: 3,
    importance: 'important',
    examFrequency: 'medium',
    keywords: ['論理', '推論', '条件', '結論'],
    relatedConcepts: ['if-then', '対偶', '逆'],
    schoolTypes: ['standard', 'advanced', 'top']
  },
  {
    id: 'math_problem_solving_strategies',
    name: '問題解決法',
    difficulty: 7,
    grade: ['6th'],
    prerequisites: ['math_logical_reasoning'],
    estimatedHours: 4,
    importance: 'important',
    examFrequency: 'high',
    keywords: ['問題解決', '戦略', '逆算', '場合分け'],
    relatedConcepts: ['ヒューリスティック', 'メタ認知'],
    schoolTypes: ['advanced', 'top']
  },
  {
    id: 'math_optimization_problems',
    name: '最適化問題',
    difficulty: 8,
    grade: ['6th'],
    prerequisites: ['math_problem_solving_strategies'],
    estimatedHours: 3,
    importance: 'useful',
    examFrequency: 'medium',
    keywords: ['最大', '最小', '最適解', '制約条件'],
    relatedConcepts: ['線形計画法', '最適化理論'],
    schoolTypes: ['advanced', 'top']
  },
  {
    id: 'math_game_theory',
    name: 'ゲーム理論入門',
    difficulty: 9,
    grade: ['6th'],
    prerequisites: ['math_logical_reasoning'],
    estimatedHours: 2,
    importance: 'useful',
    examFrequency: 'low',
    keywords: ['ゲーム理論', '戦略', '均衡', '必勝法'],
    relatedConcepts: ['意思決定', '競争'],
    schoolTypes: ['top']
  },
  {
    id: 'math_mathematical_induction',
    name: '数学的帰納法',
    difficulty: 9,
    grade: ['6th'],
    prerequisites: ['math_number_patterns'],
    estimatedHours: 2,
    importance: 'useful',
    examFrequency: 'low',
    keywords: ['数学的帰納法', '証明', '基底', '帰納段階'],
    relatedConcepts: ['一般化', '証明手法'],
    schoolTypes: ['top']
  },
  {
    id: 'math_graph_theory',
    name: 'グラフ理論入門',
    difficulty: 8,
    grade: ['6th'],
    prerequisites: ['math_combinatorics'],
    estimatedHours: 2,
    importance: 'useful',
    examFrequency: 'low',
    keywords: ['グラフ', '頂点', '辺', '経路', '木'],
    relatedConcepts: ['ネットワーク', '最短経路'],
    schoolTypes: ['top']
  },
  {
    id: 'math_coding_theory',
    name: '符号理論入門',
    difficulty: 9,
    grade: ['6th'],
    prerequisites: ['math_bases_number_systems'],
    estimatedHours: 2,
    importance: 'useful',
    examFrequency: 'low',
    keywords: ['符号', 'エラー訂正', 'チェックサム'],
    relatedConcepts: ['情報理論', 'コンピュータ'],
    schoolTypes: ['top']
  },
  {
    id: 'math_fractals',
    name: 'フラクタル入門',
    difficulty: 8,
    grade: ['6th'],
    prerequisites: ['math_geometric_construction'],
    estimatedHours: 2,
    importance: 'useful',
    examFrequency: 'low',
    keywords: ['フラクタル', '自己相似', '無限', '次元'],
    relatedConcepts: ['カオス', '複雑系'],
    schoolTypes: ['top']
  },
  {
    id: 'math_mathematical_contests',
    name: '数学オリンピック問題',
    difficulty: 10,
    grade: ['6th'],
    prerequisites: ['math_advanced_geometry', 'math_advanced_number_theory'],
    estimatedHours: 5,
    importance: 'useful',
    examFrequency: 'low',
    keywords: ['数学オリンピック', '創造的思考', '美しい解法'],
    relatedConcepts: ['数学の美', '洞察力'],
    schoolTypes: ['top']
  },
  {
    id: 'math_mathematical_modeling',
    name: '数理モデリング',
    difficulty: 9,
    grade: ['6th'],
    prerequisites: ['math_complex_application_problems'],
    estimatedHours: 3,
    importance: 'useful',
    examFrequency: 'low',
    keywords: ['数理モデル', '現実問題', '近似', 'シミュレーション'],
    relatedConcepts: ['応用数学', '社会への応用'],
    schoolTypes: ['top']
  },
  {
    id: 'math_proof_techniques',
    name: '証明技法',
    difficulty: 9,
    grade: ['6th'],
    prerequisites: ['math_logical_reasoning', 'math_mathematical_induction'],
    estimatedHours: 3,
    importance: 'useful',
    examFrequency: 'low',
    keywords: ['証明', '背理法', '対偶', '構成的証明'],
    relatedConcepts: ['論理学', '数学的厳密性'],
    schoolTypes: ['top']
  },
  {
    id: 'math_history_of_mathematics',
    name: '数学史と数学者',
    difficulty: 5,
    grade: ['5th', '6th'],
    prerequisites: [],
    estimatedHours: 2,
    importance: 'useful',
    examFrequency: 'low',
    keywords: ['数学史', '数学者', '発見', '発明'],
    relatedConcepts: ['文化としての数学', '数学の発展'],
    schoolTypes: ['advanced', 'top']
  }
];

// 算数教科データ
export const COMPREHENSIVE_MATH: ExtendedSubject = {
  id: 'math',
  name: '算数',
  topics: MATH_CURRICULUM,
  totalHours: MATH_CURRICULUM.reduce((sum, topic) => sum + topic.estimatedHours, 0),
  gradeDistribution: {
    '4th': MATH_CURRICULUM.filter(t => t.grade.includes('4th')).length,
    '5th': MATH_CURRICULUM.filter(t => t.grade.includes('5th')).length,
    '6th': MATH_CURRICULUM.filter(t => t.grade.includes('6th')).length
  }
};